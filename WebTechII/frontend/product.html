<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<style>
body{
  font-size: 1.4rem;
}

nav {
    background-color: rgb(113, 158, 158) ;
    width: 100%;
    height: 60px;
     
        };

.card-img-top {
    min-width: 100%;
    width: auto;
    height: auto;
}
</style>

</head>
<body>
<!--Navbar-->
<nav class="navbar navbar-expand-lg navbar-dark primary-color">

    <!-- Navbar brand -->
    <a class="navbar-brand" href="homepage.html">Gagdet Shop <i class="glyphicon glyphicon-headphones"></i>
    </a>
  
    <!-- Collapse button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
      aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="basicExampleNav">
  
      <!-- Links -->
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="homepage.html">Home
            <span class="sr-only">(current)</span>
            <i class="glyphicon glyphicon-home"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">MyOrders <i class="glyphicon glyphicon-folder-open"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">AboutUs <i class="glyphicon glyphicon-info-sign"></i>
          </a>
        </li>
        
        
        <li class="nav-item" style="margin-left:250px;">
            <a class="nav-link" href="#" id="username">      <i class="glyphicon glyphicon-user"> </i>
            </a>
            
        </li>
        
        <li class="nav-item" style="margin-left:10px;">
                <a class="nav-link" href="#" id="Logout" onclick="loggingout()"><span class="glyphicon glyphicon-log-out">Logout</span>
                </a>
                
        </li>
            

        <li class="nav-item" style="margin-left:150px;margin-top:10px ;">
                <button type="button" onclick="loadcartpage()" class="btn btn-primary" style="height:35px;background-color: green;width: 110%;font-size:15px;">
                        Cart <span class="badge badge-light" id="noofprods">0</span>
                 </button>
        </li>
        <!-- Dropdown -->
        
  
      </ul>
      <!-- Links -->
  
      
    </div>
    <!-- Collapsible content -->
  
  </nav>

<!--<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
    <div class="card h-100">
        <a href="#"><img class="card-img-top" src="i.jpeg" alt="" style="width:65%;height:300px;display:block;margin-left:auto;margin-right:auto;"> </a>
              <div class="card-body">
                <h4 class="card-title">
                  <a href="#">Item Five</a>
                </h4>
                <h5>$24.99</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet numquam aspernatur! Lorem ipsum dolor sit amet.</p>
              </div>
              <div class="card-footer">
                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
              </div>
    </div>
</div>
-->
<div class="container">
 
  
        <div class="col-md-6" style="width:400px">
          <img class="card-img-top" src="" alt="Card image" id="prodimage" style="width:48%;height: 250px;display:block;margin-left:auto;margin-right:auto">
          
        </div>

        <div class="col-md-6">
                <div class="row">
                 <div class="col-md-12">
                  <h1 id="productname">Ops, server didn't work</h1>
                </div>
                <div class="col-md-12">
                        <span class="label label-primary">Ratings</span>
                        <span class="monospaced" id="ratings">
                            <span class="label label-success" id="numofusers">61</span></span>
                </div>
                <div class="col-md-12">
                        
                        <span class="monospaced">ProductId <span id="productidnumber">11122</span></span>
                       </div>
                   

                <div class="col-md-12 bottom-rule">
                        <h2 class="product-price">₹ <span id="productprice">12,999</span>.00</h2>
                </div>
                
                    
                


               </div>

               <br><br><br>
               <div class="btn-group cart">
                    <button type="button"  onclick="addtocart()" class="btn btn-success" style="height: 30px;font-size: 15px;">
                        Add to cart 
                    </button>
                </div>


                <div class="alert alert-success alert-dismissible" id="cartalert" style="display: none;">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        <strong>Success!</strong> Product added to cart
                      </div>
                </div>
               <br><br><br><br><br><br><br>
        </div>

        
        <div class="container-fluid">		
                <div class="col-md-12 product-info">
                        <ul id="myTab" class="nav nav-tabs nav_tabs">
                            
                            <li class="active"><a href="#service-one" data-toggle="tab">DESCRIPTION</a></li>
                            <li><a href="#service-two" data-toggle="tab">PRODUCT INFO</a></li>
                            <li><a href="#service-three" data-toggle="tab">REVIEWS</a></li>
                            
                        </ul>
                    <div id="myTabContent" class="tab-content">
                            <div class="tab-pane   active" id="service-one">
                             
                                <section class="container product-info">
                                    The Corsair Gaming Series GS600 power supply is the ideal price-performance solution for building or upgrading a Gaming PC. A single +12V rail provides up to 48A of reliable, continuous power for multi-core gaming PCs with multiple graphics cards. The ultra-quiet, dual ball-bearing fan automatically adjusts its speed according to temperature, so it will never intrude on your music and games. Blue LEDs bathe the transparent fan blades in a cool glow. Not feeling blue? You can turn off the lighting with the press of a button.
    
                                    <h3>Corsair Gaming Series GS600 Features:</h3>
                                    <li>It supports the latest ATX12V v2.3 standard and is backward compatible with ATX12V 2.2 and ATX12V 2.01 systems</li>
                                    <li>An ultra-quiet 140mm double ball-bearing fan delivers great airflow at an very low noise level by varying fan speed in response to temperature</li>
                                    <li>80Plus certified to deliver 80% efficiency or higher at normal load conditions (20% to 100% load)</li>
                                    <li>0.99 Active Power Factor Correction provides clean and reliable power</li>
                                    <li>Universal AC input from 90~264V — no more hassle of flipping that tiny red switch to select the voltage input!</li>
                                    <li>Extra long fully-sleeved cables support full tower chassis</li>
                                    <li>A three year warranty and lifetime access to Corsair’s legendary technical support and customer service</li>
                                    <li>Over Current/Voltage/Power Protection, Under Voltage Protection and Short Circuit Protection provide complete component safety</li>
                                    <li>Dimensions: 150mm(W) x 86mm(H) x 160mm(L)</li>
                                    <li>MTBF: 100,000 hours</li>
                                    <li>Safety Approvals: UL, CUL, CE, CB, FCC Class B, TÜV, CCC, C-tick</li>
                                </section>
                                              
                            </div>
                        <div class="tab-pane fade" id="service-two">
                            
                            <section class="container">
                                    <h3>Corsair Gaming Series GS600 Features:</h3>
                                    <li>It supports the latest ATX12V v2.3 standard and is backward compatible with ATX12V 2.2 and ATX12V 2.01 systems</li>
                                    <li>An ultra-quiet 140mm double ball-bearing fan delivers great airflow at an very low noise level by varying fan speed in response to temperature</li>
                                    <li>80Plus certified to deliver 80% efficiency or higher at normal load conditions (20% to 100% load)</li>
                                    <li>0.99 Active Power Factor Correction provides clean and reliable power</li>
                                    <li>Universal AC input from 90~264V — no more hassle of flipping that tiny red switch to select the voltage input!</li>
                                    
                            </section>
                            
                        </div>
                        <div class="tab-pane fade" id="service-three">
                                                    
                        </div>
                    </div>
                    <hr>
                </div>
            </div>

        </div>
        
</div>




<div class="alert alert-success alert-dismissible" style="display: none;">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Success!</strong> This alert box could indicate a successful or positive action.
      </div>
</div>
</body>
<script>

//localStorage.setItem("username","Avinash");
cartitems=JSON.parse(localStorage.getItem("cart"));
var len=Object.keys(cartitems).length;
document.getElementById("username").innerHTML+=localStorage.getItem("presentuser");
document.getElementById("noofprods").innerHTML=len;
document.getElementById("productidnumber").innerHTML=localStorage.getItem("productid")*12943;

var productid=localStorage.getItem("productid");

xhr =new XMLHttpRequest;
xhr.onreadystatechange=getdata;
var url="http://localhost:5000/product/"+productid;
xhr.open("GET",url,true);
xhr.send();
var atstar= ' <span class="glyphicon glyphicon-star" aria-hidden="true" id="activestar"></span>'
var inacstar='<span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="inactivestar"></span>';
function getdata()
{
    if(xhr.readyState==4 && xhr.status==200)
    {
        console.log(JSON.parse(xhr.responseText));
        //console.log("recieved")
        var res= JSON.parse(xhr.responseText);
        document.getElementById("productname").innerHTML=res["name"];
      //  document.getElementById("prodimage").src='"'+data["photo"]+'"';
        document.getElementById("productprice").innerHTML=res["price"];
        document.getElementById("numofusers").innerHTML=Math.floor(Math.random() * 100) + 10;
        var i;
        for(i=0;i<res["rating"];i++)
        {
        document.getElementById("ratings").innerHTML+=atstar;
        }
        for(i=0;i<5-res["rating"];i++)
        {
            document.getElementById("ratings").innerHTML+=inacstar;
        }
        document.getElementById("prodimage").src="img/"+res["photo"];
        console
    }
    
}


function addtocart(){
    document.getElementById("cartalert").style="";
    var idprod = localStorage.getItem("productid");
    //Object.keys(res).length
    cartitems={};
    cartitems=JSON.parse(localStorage.getItem("cart"));
    var len=Object.keys(cartitems).length;
    cartitems[idprod]+=1;
    localStorage.setItem("cart",JSON.stringify(cartitems));
    console.log(cartitems,len);

}


function loggingout(){
  console.log("will log you out");
  localStorage.removeItem("presentuser");
  localStorage.removeItem("cart")
  window.location.replace("index.html");
}
function loadcartpage(){
  window.location.replace("cart.html")
}
</script>
</html>